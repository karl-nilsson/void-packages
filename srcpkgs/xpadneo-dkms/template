# Template file for 'xpadneo-dkms'
pkgname=xpadneo-dkms
version=0.8.3
revision=1
wrksrc=xpadneo-${version}
depends="dkms bluez"
short_desc="Advanced Linux Driver for Xbox One Wireless Gamepad"
maintainer="Cameron Katri <katri.cameron@gmail.com>"
license="GPL-2.0-or-later"
homepage="https://github.com/atar-axis/xpadneo"
distfiles="https://github.com/atar-axis/xpadneo/archive/v${version}.tar.gz"
checksum=88ffd67b42038d144106e673e29cb1ce18df2aad4d1dad471865ebac860230e9
dkms_modules="hid-xpadneo ${version}"

pre_configure() {
	vsed -i 's/PACKAGE_VERSION="@DO_NOT_CHANGE@"/PACKAGE_VERSION="'"${version}"'"/g' hid-xpadneo/dkms.conf
	vsed -i 's/#define DRV_VER "@DO_NOT_CHANGE@"/#define DRV_VER "'"${version}"'"/g' hid-xpadneo/src/hid-xpadneo.c
	vsed -i 's@/etc/udev/rules.d@/usr/lib/udev/rules.d@g' hid-xpadneo/dkms.post_install hid-xpadneo/dkms.post_remove
}

do_install() {
	vmkdir usr/src/hid-xpadneo-${version}
	vcopy "hid-xpadneo/*" usr/src/hid-xpadneo-${version}
}
