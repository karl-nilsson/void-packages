# Template file for 'occt'
pkgname=occt
_gittag="V7_3_0"
version=7.3.0
revision=1
wrksrc=occt-${_gittag}
build_style=cmake
configure_args="-DUSE_FREEIMAGE=ON -DUSE_TBB=ON -DUSE_GL2PS=ON -DUSE_VTK=OFF
 -DINSTALL_SAMPLES=ON"
makedepends="freetype-devel glu-devel freeimage-devel gl2ps-devel tbb-devel
 tcl-devel tk-devel"
short_desc="OpenCASCADE Technology - library for CAD/CAM/CAE applications"
maintainer="Piraty <piraty1@inbox.ru>"
license="LGPL-2.1-only"
homepage="https://www.opencascade.com"
distfiles="https://git.dev.opencascade.org/gitweb/?p=occt.git;a=snapshot;h=refs/tags/${_gittag};sf=tgz>occt-${_gittag}.tar.gz"
checksum=7298c5eadc6dd0aeb6265ff2958e8e742d6e3aa65227acce8094f96f1bf6d2ac
conflicts="oce>=0"

post_install() {
	vlicense OCCT_LGPL_EXCEPTION.txt
	rm ${DESTDIR}/usr/bin/custom*.sh
}

occt-devel_package() {
	short_desc+=" - development files"
	depends="${makedepends} ${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove "usr/lib/cmake"
		mkdir -p ${PKGDESTDIR}/usr/share/${pkgname}
		vcopy samples usr/share/${pkgname}
	}
}
